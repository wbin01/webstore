{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container-sm">
    <h1 class="text-center">Editar Usu√°rio</h1>
      <p class="mb-4 text-muted text-center">Edite os campos</p>

      <div style="height: 30px;">
        {% if warning %}
        <p class="bg-danger-subtle text-danger border border-danger-subtle px-2 rounded-3">
        {{ warning }}
        </p>
        {% endif %}
      </div>

      <div class="form-group shadow-sm bg-white px-4 py-2 rounded-2 bg-opacity-50">
      <form action="{% url 'manage_users_edit' edit_user_profile.user.username edit_user_profile.id %}" method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <!-- User Form * url 'manage_users_edit_save' edit_user_profile.id * -->
        {% for field in form_user.visible_fields %}
        {% if field.name != 'password' %}
          {% if field.field.widget.input_type == 'checkbox' %}
          <div class="form-group mt-3">
            {{ field }} <label for="{{ field.id_for_label }}">{{ field.label | safe }}</label>
          </div>
          {% elif field.field.widget.input_type == 'number' %}
          <div class="form-group mt-3">
            <label for="{{ field.id_for_label }}">{{ field.label | safe }}</label>
            <div style="max-width: 100px;">{{ field }}</div>
          </div>
          {% else %}
          <div class="form-group mt-3">
            <label for="{{ field.id_for_label }}">{{ field.label | safe }}</label>{{ field }}
          </div>
          {% endif %}
        {% endif %}
        {% endfor %}

        <!-- Profile Form -->
        {% for field in form_user_profile.visible_fields %}
          {% if field.field.widget.input_type == 'checkbox' %}
          <div class="form-group mt-3">
            {{ field }} <label for="{{ field.id_for_label }}">{{ field.label | safe }}</label>
          </div>
          {% elif field.field.widget.input_type == 'number' %}
          <div class="form-group mt-3">
            <label for="{{ field.id_for_label }}">{{ field.label | safe }}</label>
            <div style="max-width: 100px;">{{ field }}</div>
          </div>

          {% elif field.name == 'profile_image' %}
          <div class="form-group mt-3">
            <label for="{{ field.id_for_label }}">{{ field.label | safe }}</label>
            {% if edit_user_profile.profile_image %}
            <div class="row">
              <div class="col" style="max-width: 50px;">
                <img src="{{ edit_user_profile.profile_image.url }}" class="rounded">
              </div>
              <div class="col">{{ field }}</div>
            </div>

            <input class="form-check-input" type="checkbox" value="" name="remove_image" id="remove_image">
            <label class="form-check-label" for="remove_image">
              &nbsp;Limpar imagem do perfil
            </label>

            {% else %}
            {{ field }}
            {% endif %}
          </div>
          {% else %}

          <div class="form-group mt-3">
            <label for="{{ field.id_for_label }}">{{ field.label | safe }}</label>{{ field }}
          </div>
          {% endif %}
        {% endfor %}
        <input type="submit" value="Salvar" class="btn btn-dark mt-3 mb-5">
      </form>
      </div>

</div>
{% endblock %}
